buildscript {
    repositories {
        mavenCentral()
        maven {
            name 'sonatype-snapshots'
            url "https://oss.sonatype.org/content/repositories/snapshots/"
        }
        jcenter()
    }
    dependencies {
        classpath "org.elasticsearch.gradle:build-tools:${elasticsearchVersion}"
    }
}

apply plugin: 'idea'
apply plugin: 'elasticsearch.esplugin'

// Will be removed after upgrading Elasticsearch to 6.x
ext.projectSubstitutions = [:]

esplugin {
    name = 'analysis-jmorphy2'
    description 'Jmorphy2 plugin for ElasticSearch'
    classname = 'company.evo.jmorphy2.elasticsearch.plugin.AnalysisJmorphy2Plugin'

}

if (project.hasProperty('licenseFile')) {
    project.licenseFile = project.file('LICENSE.txt')
}
if (project.hasProperty('noticeFile')) {
    project.noticeFile = project.file('NOTICE.txt')
}

version = "${version}-es-${elasticsearchVersion}"

ext {
    dependenciesDir = "${buildDir}/dependencies"
}

dependencies {
    compile project(':jmorphy2-lucene')
    compile project(':jmorphy2-dicts-ru')
    compile project(':jmorphy2-dicts-uk')

    testCompile project(path: ':jmorphy2-core', configuration: 'tests')
}

dependencyLicenses {
    ignoreSha 'dawg'
    ignoreSha 'jmorphy2-core'
    ignoreSha 'jmorphy2-dicts-ru'
    ignoreSha 'jmorphy2-dicts-uk'
    ignoreSha 'jmorphy2-lucene'
    ignoreSha 'jmorphy2-nlp'
}

thirdPartyAudit.enabled = false
// TODO: write integration tests
integTest.enabled = false
